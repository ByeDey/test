ALTER TABLE EMPLOYEE
MODIFY(EMP_STATUS DEFAULT '1');

ALTER TABLE CMM_CODE
MODIFY(CMM_CLASS VARCHAR2(30));

INSERT INTO DEPARTMENT(DEPT_CD,DEPT_NM,P_DEPT_CD) VALUES('1000','대표',null);
INSERT INTO DEPARTMENT(DEPT_CD,DEPT_NM,P_DEPT_CD) VALUES('1100','인사팀','1000');
INSERT INTO DEPARTMENT(DEPT_CD,DEPT_NM,P_DEPT_CD) VALUES('1200','경영팀','1000');
INSERT INTO DEPARTMENT(DEPT_CD,DEPT_NM,P_DEPT_CD) VALUES('1300','관리팀','1000');

SELECT * FROM DEPARTMENT;

insert into employee(emp_no,emp_nm,dept_cd,position_cd,hire_date,RETIRE_DATE,gender,birth,email,pw)
		values('25001','나사장','1100','1','2000-01-01',null,'1','1970-02-01','email@naver.com','1');

insert into employee(emp_no,emp_nm,dept_cd,position_cd,hire_date,retire_date,gender,birth,email,pw)
		values('25002','나부장','1100','2','2001-01-01',null,'2','1980-02-01','email2@naver.com','1');

insert into employee(emp_no,emp_nm,dept_cd,position_cd,hire_date,retire_date,gender,birth,email,pw)
		values('25003','나과장','1100','3','2002-01-01',NULL,'1','1985-02-01','email3@naver.com','1');

insert into employee(emp_no,emp_nm,dept_cd,position_cd,hire_date,retire_date,gender,birth,email,pw)
		values('25004','나사원','1000','4','2004-01-01',null,'2','1980-02-01','email4@naver.com','1');



SELECT *FROM  EMPLOYEE;

INSERT INTO AUTH_INFO(AUTH_CD,AUTH_NM) VALUES('10','공지사항등록권한');
INSERT INTO AUTH_INFO(AUTH_CD,AUTH_NM) VALUES('20','인사관리담당자');
INSERT INTO AUTH_INFO(AUTH_CD,AUTH_NM) VALUES('30','관리자권한');

SELECT * FROM AUTH_INFO;

INSERT INTO EMPLOYEE_AUTH(auth_cd,EMP_NO) values('10','25001');
INSERT INTO EMPLOYEE_AUTH(auth_cd,EMP_NO) values('20','25001');
INSERT INTO EMPLOYEE_AUTH(auth_cd,EMP_NO) values('30','25001');

INSERT INTO EMPLOYEE_AUTH(auth_cd,EMP_NO) values('10','25002');
INSERT INTO EMPLOYEE_AUTH(auth_cd,EMP_NO) values('20','25002');
INSERT INTO EMPLOYEE_AUTH(auth_cd,EMP_NO) values('30','25002');

SELECT * FROM EMPLOYEE_AUTH;

INSERT INTO CMM_CODE(CMM_CLASS,CMM_CD,CMM_NM) VALUES('POSITION_CD','1','사장');
INSERT INTO CMM_CODE(CMM_CLASS,CMM_CD,CMM_NM) VALUES('POSITION_CD','2','부장');
INSERT INTO CMM_CODE(CMM_CLASS,CMM_CD,CMM_NM) VALUES('POSITION_CD','3','과장');
INSERT INTO CMM_CODE(CMM_CLASS,CMM_CD,CMM_NM) VALUES('POSITION_CD','4','사원');

INSERT INTO CMM_CODE(CMM_CLASS,CMM_CD,CMM_NM) VALUES('EMP_STATUS','1','재직');
INSERT INTO CMM_CODE(CMM_CLASS,CMM_CD,CMM_NM) VALUES('EMP_STATUS','2','휴직');
INSERT INTO CMM_CODE(CMM_CLASS,CMM_CD,CMM_NM) VALUES('EMP_STATUS','9','퇴직');

INSERT INTO CMM_CODE(CMM_CLASS,CMM_CD,CMM_NM) VALUES('GENDER','1','남자');
INSERT INTO CMM_CODE(CMM_CLASS,CMM_CD,CMM_NM) VALUES('GENDER','2','여자');

INSERT INTO CMM_CODE(CMM_CLASS,CMM_CD,CMM_NM) VALUES('ATTACH_TYPE','1','공지사항첨부파일');
INSERT INTO CMM_CODE(CMM_CLASS,CMM_CD,CMM_NM) VALUES('ATTACH_TYPE','2','전자결재첨부파일');
INSERT INTO CMM_CODE(CMM_CLASS,CMM_CD,CMM_NM) VALUES('ATTACH_TYPE','3','메신저첨부파일');



SELECT * FROM CMM_CODE;


SELECT E.EMP_NO
	  ,E.EMP_NM 
	  ,(SELECT X.CMM_NM FROM CMM_CODE X WHERE X.CMM_CLASS = 'POSITION_CD' AND X.CMM_CD = E.POSITION_CD) AS POSITION_NM 
      ,E.* 
   FROM  EMPLOYEE E;


SELECT E.EMP_NO
      ,E.EMP_NM
      ,C.CMM_NM
       ,(SELECT X.CMM_NM FROM CMM_CODE X WHERE X.CMM_CLASS = 'POSITION_CD' AND X.CMM_CD = E.POSITION_CD) AS POSITION_NM 
    FROM EMPLOYEE E
    	LEFT OUTER JOIN CMM_CODE C
    				 ON C.CMM_CLASS = 'POSITION_CD'
    				 AND C.CMM_CD = E.POSITION_CD; 
    			
SELECT 
        E.EMP_NO,
        E.EMP_NM,
        E.PW,
        E.DEPT_CD,
        (SELECT D.DEPT_NM FROM DEPT D WHERE D.DEPT_CD = E.DEPT_CD) AS dept_nm,
        E.POSITION_CD,
        (SELECT C.CMM_NM FROM CMM_CODE C WHERE C.CMM_CLASS = 'POSITION_CD' AND C.CMM_CD = E.POSITION_CD) AS position_nm
    FROM EMPLOYEE E
    WHERE E.EMP_NO = #{emp_no}
      AND E.PW = #{pw}

